# Extend from community registry

[extends]
registry = "github:chrismlittle123/check-my-toolkit-registry-community"
rulesets = ["typescript-internal"]

# Local overrides
[code.linting.eslint]
enabled = true
files = ["src/**/*.ts"]

# Naming conventions (override to exclude test fixtures)
[code.naming]
enabled = true

[[code.naming.rules]]
extensions = ["ts", "tsx"]
file_case = "kebab-case"
folder_case = "kebab-case"
exclude = ["tests/e2e/projects/**", "dashboard/src/app/**/\\[*\\]/**", "dashboard/src/components/**"]

# Process domain - workflow validation
[process.hooks]
enabled = true
require_husky = true
require_hooks = ["pre-push"]

[process.hooks.commands]
pre-push = ["process check-branch"]

[process.ci]
enabled = true
require_workflows = ["ci.yml", "release.yml", "pr-checks.yml"]

[process.ci.jobs]
"ci.yml" = ["test"]

[process.ci.actions]
"ci.yml" = ["actions/checkout", "actions/setup-node"]

[process.branches]
enabled = true
# Branch format: <type>/<milestone>/<issue-number>/<description>
# Examples: feature/v1.2.0/123/add-login, fix/v1.2.0/456/broken-button
pattern = "^(feature|fix|hotfix|docs)/(v[0-9]+\\.[0-9]+\\.[0-9]+)/([0-9]+)/[a-z0-9-]+$"
exclude = ["main", "docs/*"]

# Note: Issue linking is enforced via:
# 1. [process.branches] pattern requires issue number in branch names
# 2. GitHub Actions pr-checks.yml validates PR descriptions have "Closes #123"
# The [process.tickets] check is disabled because branch pattern handles this

[process.commits]
enabled = true
types = ["feat", "fix", "chore", "docs", "refactor"]
require_scope = false
max_subject_length = 100

[process.changesets]
enabled = true
require_for_paths = ["src/**"]
exclude_paths = ["**/*.test.ts", "**/*.md"]
validate_format = true
require_description = true

[process.repo.branch_protection]
branch = "main"
required_reviews = 0
dismiss_stale_reviews = false
require_code_owner_reviews = false
require_status_checks = ["test"]
require_branches_up_to_date = true
enforce_admins = false

[process.docs]
enabled = true
path = "docs/"
enforcement = "block"
allowlist = [
  # Required spec files
  "docs/specs/code.md",
  "docs/specs/process.md",
  "docs/specs/infra.md",
  # Standard root files
  "README.md",
  "CHANGELOG.md",
  "CLAUDE.md",
  # Other allowed files
  "docs/VISION.md",
  "docs/FEATURES.md",
  ".changeset/README.md",
]
max_files = 5
