# Drift configuration for drift-toolkit itself
# This serves as both configuration and an example

integrity:
  # Files that must match their approved versions exactly
  protected:
    - file: .github/workflows/release.yml
      approved: approved/release.yml
      severity: critical

    - file: .github/workflows/ci.yml
      approved: approved/ci.yml
      severity: high

  # Patterns to discover new files that might need protection
  discover:
    - pattern: ".github/workflows/*.yml"
      suggestion: "Workflow files should be reviewed for protection"

scans:
  # Check for required files
  - name: has-readme
    command: test -f README.md

  - name: has-license
    command: test -f LICENSE

  - name: has-package-json
    command: test -f package.json

  # TypeScript checks (only if tsconfig.json exists)
  - name: typescript-check
    command: npm run typecheck
    if: tsconfig.json

  # Lint check
  - name: lint-check
    command: npm run lint
    if: package.json
